import{_ as s,o as a,c as n,a as l}from"./app.f3c12a67.js";const d=JSON.parse('{"title":"C\u548CGo\u76F8\u4E92\u8C03\u7528","description":"","frontmatter":{"layout":"post","title":"C\u548CGo\u76F8\u4E92\u8C03\u7528","date":"2020-08-03 00:15:00 +0800"},"headers":[{"level":2,"title":"1. Go \u8C03\u7528 C","slug":"_1-go-\u8C03\u7528-c","link":"#_1-go-\u8C03\u7528-c","children":[{"level":3,"title":"C \u4EE3\u7801\u5199\u5728 Go \u4EE3\u7801\u6CE8\u91CA\u91CC","slug":"c-\u4EE3\u7801\u5199\u5728-go-\u4EE3\u7801\u6CE8\u91CA\u91CC","link":"#c-\u4EE3\u7801\u5199\u5728-go-\u4EE3\u7801\u6CE8\u91CA\u91CC","children":[]},{"level":3,"title":"C \u548C Go \u4F7F\u7528\u4E0D\u540C\u7684\u6587\u4EF6","slug":"c-\u548C-go-\u4F7F\u7528\u4E0D\u540C\u7684\u6587\u4EF6","link":"#c-\u548C-go-\u4F7F\u7528\u4E0D\u540C\u7684\u6587\u4EF6","children":[]}]},{"level":2,"title":"2. C \u8C03\u7528 Go","slug":"_2-c-\u8C03\u7528-go","link":"#_2-c-\u8C03\u7528-go","children":[]},{"level":2,"title":"3. \u53C2\u8003","slug":"_3-\u53C2\u8003","link":"#_3-\u53C2\u8003","children":[]}],"relativePath":"my/post/2020-08-03-cgo.md"}'),p={name:"my/post/2020-08-03-cgo.md"},o=l(`<h2 id="_1-go-\u8C03\u7528-c" tabindex="-1">1. Go \u8C03\u7528 C <a class="header-anchor" href="#_1-go-\u8C03\u7528-c" aria-hidden="true">#</a></h2><h3 id="c-\u4EE3\u7801\u5199\u5728-go-\u4EE3\u7801\u6CE8\u91CA\u91CC" tabindex="-1">C \u4EE3\u7801\u5199\u5728 Go \u4EE3\u7801\u6CE8\u91CA\u91CC <a class="header-anchor" href="#c-\u4EE3\u7801\u5199\u5728-go-\u4EE3\u7801\u6CE8\u91CA\u91CC" aria-hidden="true">#</a></h3><div class="language-go"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;">package</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">main</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// int add(int a, int b) {</span></span>
<span class="line"><span style="color:#676E95;">// 	return a + b;</span></span>
<span class="line"><span style="color:#676E95;">// }</span></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">C</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">fmt</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	fmt</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Println</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">C</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">add</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">))</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u7136\u540E\u6267\u884C\uFF1A</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">go run main.go</span></span>
<span class="line"></span></code></pre></div><h3 id="c-\u548C-go-\u4F7F\u7528\u4E0D\u540C\u7684\u6587\u4EF6" tabindex="-1">C \u548C Go \u4F7F\u7528\u4E0D\u540C\u7684\u6587\u4EF6 <a class="header-anchor" href="#c-\u548C-go-\u4F7F\u7528\u4E0D\u540C\u7684\u6587\u4EF6" aria-hidden="true">#</a></h3><p>add.c</p><div class="language-c"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki"><code><span class="line"><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">add</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">a</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">b</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> a </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> b</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>main.go</p><div class="language-go"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;">package</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">main</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// #include &quot;add.c&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">C</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">fmt</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	fmt</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Println</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">C</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">add</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">))</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u7136\u540E\u6267\u884C\uFF1A</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">go run main.go</span></span>
<span class="line"></span></code></pre></div><h2 id="_2-c-\u8C03\u7528-go" tabindex="-1">2. C \u8C03\u7528 Go <a class="header-anchor" href="#_2-c-\u8C03\u7528-go" aria-hidden="true">#</a></h2><p>add.go</p><div class="language-go"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;">package</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">main</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">C</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">//export add</span></span>
<span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">add</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">a</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> b C</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">int</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> C</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> a </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> b</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"></span></code></pre></div><p>main.c</p><div class="language-c"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;">#include</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#C3E88D;">stdio.h</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">#include</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">add.h</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#82AAFF;">printf</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Hi from C</span><span style="color:#A6ACCD;">\\n</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#82AAFF;">printf</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">%d</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">add</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">));</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u6267\u884C\uFF1A</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">go build -buildmode=c-archive -o add.a add.go</span></span>
<span class="line"></span></code></pre></div><p>\u4F1A\u751F\u6210 add.h \u548C add.a \u6587\u4EF6\uFF0C\u7136\u540E\u6267\u884C\uFF1A</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">gcc add.a main.c -o main</span></span>
<span class="line"></span></code></pre></div><blockquote><p>\u6CE8\uFF1A\u901A\u8FC7 <code>go help buildmode</code> \u53EF\u4EE5\u67E5\u770B\u66F4\u591A\u5E2E\u52A9\u4FE1\u606F</p></blockquote><h2 id="_3-\u53C2\u8003" tabindex="-1">3. \u53C2\u8003 <a class="header-anchor" href="#_3-\u53C2\u8003" aria-hidden="true">#</a></h2><ul><li><a href="https://golang.org/cmd/cgo/" target="_blank" rel="noreferrer">Command cgo</a></li><li><a href="https://github.com/golang/go/wiki/cgo" target="_blank" rel="noreferrer">wiki/cgo</a></li><li><a href="https://blog.golang.org/cgo" target="_blank" rel="noreferrer">C? Go? Cgo!</a></li><li><a href="https://colobu.com/2018/08/28/c-and-go-calling-interaction/" target="_blank" rel="noreferrer">C\u548CGo\u76F8\u4E92\u8C03\u7528</a></li><li><a href="https://chai2010.cn/advanced-go-programming-book/ch2-cgo/ch2-04-func.html" target="_blank" rel="noreferrer">\u51FD\u6570\u8C03\u7528</a></li><li><a href="https://chai2010.cn/advanced-go-programming-book/ch2-cgo/ch2-05-internal.html" target="_blank" rel="noreferrer">\u5185\u90E8\u673A\u5236</a></li></ul>`,24),e=[o];function c(t,r,F,D,i,y){return a(),n("div",null,e)}const A=s(p,[["render",c]]);export{d as __pageData,A as default};
