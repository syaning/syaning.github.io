import{_ as s,o as l,c as n,a}from"./app.17d1564c.js";const e="/assets/https.3d6783c1.png",h=JSON.parse('{"title":"HTTPS\u5C0F\u7ED3","description":"","frontmatter":{"layout":"post","title":"HTTPS\u5C0F\u7ED3","date":"2016-10-17 12:00:00 +0800"},"headers":[{"level":2,"title":"\u53C2\u8003\u6587\u7AE0","slug":"\u53C2\u8003\u6587\u7AE0","link":"#\u53C2\u8003\u6587\u7AE0","children":[]},{"level":2,"title":"CA\u8BC1\u4E66","slug":"ca\u8BC1\u4E66","link":"#ca\u8BC1\u4E66","children":[]},{"level":2,"title":"HTTPS\u6D41\u7A0B\u6982\u8FF0","slug":"https\u6D41\u7A0B\u6982\u8FF0","link":"#https\u6D41\u7A0B\u6982\u8FF0","children":[]},{"level":2,"title":"Node.js HTTPS","slug":"node-js-https","link":"#node-js-https","children":[]}],"relativePath":"my/post/2016-10-17-https.md"}'),p={name:"my/post/2016-10-17-https.md"},o=a('<h2 id="\u53C2\u8003\u6587\u7AE0" tabindex="-1">\u53C2\u8003\u6587\u7AE0 <a class="header-anchor" href="#\u53C2\u8003\u6587\u7AE0" aria-hidden="true">#</a></h2><ul><li><a href="https://yanhooit.gitbooks.io/ios_study_note/content/httpsyuan_li_pian.html" target="_blank" rel="noreferrer">iOS\u5B66\u4E60\u7B14\u8BB0\u2014\u2014HTTPS\u539F\u7406\u7BC7</a></li><li><a href="http://www.cnblogs.com/ttltry-air/archive/2012/08/20/2647898.html" target="_blank" rel="noreferrer">HTTPS\u5DE5\u4F5C\u539F\u7406\u548CTCP\u63E1\u624B\u673A\u5236</a></li><li><a href="http://www.ruanyifeng.com/blog/2014/09/illustration-ssl.html" target="_blank" rel="noreferrer">\u56FE\u89E3SSL/TLS\u534F\u8BAE</a></li><li><a href="https://www.sitepoint.com/how-to-use-ssltls-with-node-js/" target="_blank" rel="noreferrer">How to Use SSL/TLS with Node.js</a></li></ul><p>\u5728\u4E0A\u4E00\u7BC7\u535A\u6587\u300ANode\u6838\u5FC3\u6A21\u5757\u4E4Bcrypto\u300B\u4E2D\uFF0C\u63D0\u5230\u4E86\u52A0\u5BC6\uFF08\u6458\u8981\uFF0C\u52A0\u5BC6\u89E3\u5BC6\uFF0C\u7B7E\u540D\u7B49\uFF09\u7684\u56DB\u79CD\u5E38\u89C1\u7C7B\u578B\uFF1A</p><ul><li>Hash\uFF08\u54C8\u5E0C\uFF09</li><li>HMAC\uFF08\u57FA\u4E8E\u54C8\u5E0C\u7684\u6D88\u606F\u8BA4\u8BC1\u7801\uFF09</li><li>\u52A0\u5BC6\uFF0C\u89E3\u5BC6</li><li>\u7B7E\u540D\uFF0C\u9A8C\u8BC1</li></ul><p>HTTPS\u7684\u6574\u4E2A\u8FC7\u7A0B\u548C\u4EE5\u4E0A\u51E0\u79CD\u65B9\u6CD5\u5BC6\u5207\u76F8\u5173\u3002</p><h2 id="ca\u8BC1\u4E66" tabindex="-1">CA\u8BC1\u4E66 <a class="header-anchor" href="#ca\u8BC1\u4E66" aria-hidden="true">#</a></h2><p>CA \u5373 Certificate Authority \uFF08<a href="https://zh.wikipedia.org/wiki/%E6%95%B0%E5%AD%97%E8%AF%81%E4%B9%A6%E8%AE%A4%E8%AF%81%E6%9C%BA%E6%9E%84" target="_blank" rel="noreferrer">\u6570\u5B57\u8BC1\u4E66\u8BA4\u8BC1\u673A\u6784</a>\uFF09\uFF0CCA\u8BC1\u4E66\u7684\u7B7E\u53D1\u4EE5\u53CA\u9A8C\u8BC1\u5305\u542B\u4EE5\u4E0B\u4E09\u65B9\uFF1A</p><ul><li>CA</li><li>Server</li><li>Client</li></ul><p>\u8FC7\u7A0B\u5305\u62EC\uFF1A</p><ol><li>Server\u751F\u6210\u4E00\u5BF9\u516C\u94A5\u548C\u79C1\u94A5</li><li>Server\u5C06\u516C\u94A5\u4EE5\u53CA\u57DF\u540D\u7B49\u4FE1\u606F\u63D0\u4EA4\u7ED9CA</li><li>CA\u5BF9Server\u63D0\u4EA4\u7684\u4FE1\u606F\u8FDB\u884C\u5BA1\u6838\uFF0C\u5982\u679C\u5BA1\u6838\u901A\u8FC7\uFF0C\u5219\u4F7F\u7528CA\u7684\u79C1\u94A5\u5BF9Server\u6240\u63D0\u4EA4\u7684\u4FE1\u606F\u8FDB\u884C\u7B7E\u540D</li><li>Client\u5411Server\u53D1\u8D77\u8BF7\u6C42\u65F6\uFF0CServer\u8FD4\u56DE\u8BC1\u4E66</li><li>Client\u4F7F\u7528CA\u7684\u516C\u94A5\u5BF9\u8BC1\u4E66\u8FDB\u884C\u9A8C\u8BC1</li><li>\u5982\u679C\u9A8C\u8BC1\u901A\u8FC7\uFF0C\u5219Client\u8BA4\u4E3AServer\u53EF\u4FE1\uFF0C\u8FDB\u884C\u540E\u7EED\u901A\u8BDD</li></ol><h2 id="https\u6D41\u7A0B\u6982\u8FF0" tabindex="-1">HTTPS\u6D41\u7A0B\u6982\u8FF0 <a class="header-anchor" href="#https\u6D41\u7A0B\u6982\u8FF0" aria-hidden="true">#</a></h2><p>\u4E0B\u9762\u662FHTTPS\u6D41\u7A0B\u7684\u7B80\u8981\u6982\u8FF0\uFF1A</p><p><img src="'+e+`" alt="HTTPS"></p><blockquote><p>\u56FE\u7247\u6765\u6E90\uFF1A<a href="http://www.cnblogs.com/ttltry-air/archive/2012/08/20/2647898.html" target="_blank" rel="noreferrer">http://www.cnblogs.com/ttltry-air/archive/2012/08/20/2647898.html</a></p></blockquote><ol><li>Client\u53D1\u8D77HTTPS\u8FDE\u63A5\u8BF7\u6C42\uFF0CServer\u8FD4\u56DE\u8BC1\u4E66</li><li>Client\u751F\u6210\u968F\u673A\u6570</li><li>Client\u4F7F\u7528\u8BC1\u4E66\u4E2D\u7684\u516C\u94A5\u52A0\u5BC6\u968F\u673A\u6570</li><li>Client\u5C06\u52A0\u5BC6\u540E\u7684\u968F\u673A\u6570\u53D1\u7ED9Server\uFF0CServer\u4F7F\u7528\u79C1\u94A5\u8FDB\u884C\u89E3\u5BC6\u5F97\u5230\u968F\u673A\u6570</li><li>\u4F7F\u7528\u8BE5\u968F\u673A\u6570\u4F5C\u4E3A\u5BF9\u79F0\u52A0\u5BC6\u5BC6\u94A5\u8FDB\u884C\u540E\u7EED\u901A\u8BDD</li></ol><p>\u5F53\u7136\uFF0C\u8FD9\u53EA\u662F\u4E00\u4E2A\u975E\u5E38\u7B80\u8981\u7684\u6982\u8FF0\uFF0C\u800C\u5B9E\u9645\u4E0A\u534F\u5546\u5BF9\u79F0\u52A0\u5BC6\u5BC6\u94A5\u7B49\u8FC7\u7A0B\u8981\u590D\u6742\u7684\u591A\uFF0C\u53EF\u4EE5\u901A\u8FC7\u53C2\u8003\u6587\u7AE0\u67E5\u770B\u66F4\u52A0\u8BE6\u7EC6\u7684\u8FC7\u7A0B\u3002</p><h2 id="node-js-https" tabindex="-1">Node.js HTTPS <a class="header-anchor" href="#node-js-https" aria-hidden="true">#</a></h2><p>\u4E0B\u9762\u662F\u7528Node\u521B\u5EFA\u4E00\u4E2AHTTPS\u670D\u52A1\u5668\u7684\u4F8B\u5B50\u3002</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;"># \u751F\u6210\u79C1\u94A5 server.key</span></span>
<span class="line"><span style="color:#A6ACCD;">openssl genrsa -out server.key 2048</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># \u751F\u6210\u8BF7\u6C42\u6587\u4EF6 server.csr</span></span>
<span class="line"><span style="color:#A6ACCD;">openssl req -new -key server.key -out server.csr</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># \u81EA\u7B7E\u540D\uFF0C\u751F\u6210\u8BC1\u4E66 server.crt</span></span>
<span class="line"><span style="color:#A6ACCD;">openssl x509 -req -days 365 -in server.csr -signkey server.key -out server.crt</span></span>
<span class="line"></span></code></pre></div><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> fs </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">fs</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> https </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">https</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> express </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">express</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> app </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">express</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> options </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">key</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> fs</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">readFileSync</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">server.key</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">cert</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> fs</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">readFileSync</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">server.crt</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">app</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">req</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">res</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">res</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">send</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">hello world</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">https</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createServer</span><span style="color:#A6ACCD;">(options</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> app)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">listen</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">9000</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">server on port 9000 ...</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">))</span></span>
<span class="line"></span></code></pre></div><p>\u7136\u540E\u8BBF\u95EE<code>https://localhost:9000</code>\u5C31\u53EF\u4EE5\u4E86\u3002</p>`,21),t=[o];function r(c,i,y,A,D,C){return l(),n("div",null,t)}const d=s(p,[["render",r]]);export{h as __pageData,d as default};
