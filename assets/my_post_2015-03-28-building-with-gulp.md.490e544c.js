import{_ as s,o as n,c as a,a as l}from"./app.aede3185.js";const i=JSON.parse('{"title":"\u57FA\u4E8Egulp\u7684\u81EA\u52A8\u5316\u6784\u5EFA","description":"","frontmatter":{"layout":"post","title":"\u57FA\u4E8Egulp\u7684\u81EA\u52A8\u5316\u6784\u5EFA","date":"2015-03-28 00:00:00 +0800"},"headers":[],"relativePath":"my/post/2015-03-28-building-with-gulp.md"}'),p={name:"my/post/2015-03-28-building-with-gulp.md"},o=l(`<p><a href="http://gulpjs.com/" target="_blank" rel="noreferrer">gulp</a>\u662F\u4E00\u4E2A\u524D\u7AEF\u7684\u81EA\u52A8\u5316\u9879\u76EE\u6784\u5EFA\u5DE5\u5177\uFF0C\u4E0E<a href="http://gruntjs.com/" target="_blank" rel="noreferrer">grunt</a> \u7C7B\u4F3C\uFF0C\u4E0D\u8FC7\u76F8\u6BD4\u4E4B\u4E0B\uFF0Cgrunt\u7684\u914D\u7F6E\u4EE5\u53CA\u4F7F\u7528\u8F83\u4E3A\u7E41\u7410\uFF0C\u800Cgulp\u5219\u6BD4\u8F83\u7B80\u5355\u6613\u5B66\u3002</p><p>\u4E00\u4E2A\u9879\u76EE\u4ECE\u6700\u521D\u7684\u542F\u52A8\u5230\u5B9E\u73B0\uFF0C\u57FA\u672C\u4E0A\u6709\u5982\u4E0B\u7684\u6784\u5EFA\u4EFB\u52A1\uFF1A</p><ul><li>\u4F9D\u8D56\u5305\u7BA1\u7406 <a href="https://www.npmjs.com/" target="_blank" rel="noreferrer">npm</a>, <a href="http://bower.io/" target="_blank" rel="noreferrer">bower</a></li><li>\u8BED\u6CD5\u68C0\u67E5 <a href="https://github.com/jshint/jshint" target="_blank" rel="noreferrer">JSHint</a>, <a href="https://github.com/douglascrockford/JSLint" target="_blank" rel="noreferrer">JSLint</a></li><li>\u4EE3\u7801\u5408\u5E76 <a href="http://browserify.org/" target="_blank" rel="noreferrer">browserify</a></li><li>\u4EE3\u7801\u538B\u7F29 <a href="https://github.com/mishoo/UglifyJS" target="_blank" rel="noreferrer">UglifyJS</a></li><li>\u6D4B\u8BD5 <a href="http://mochajs.org/" target="_blank" rel="noreferrer">mocha</a></li><li>\u5220\u9664\u4E34\u65F6\u6587\u4EF6 <a href="https://github.com/sindresorhus/del" target="_blank" rel="noreferrer">del</a></li></ul><p>\u901A\u8FC7\u4F7F\u7528gulp\uFF0C\u53EF\u4EE5\u81EA\u52A8\u5316\u6267\u884C\u4EE5\u4E0A\u7684\u5927\u90E8\u5206\u6784\u5EFA\u4EFB\u52A1\uFF0C\u4ECE\u800C\u4F7F\u5F97\u9879\u76EE\u7684\u6784\u5EFA\u53D8\u5F97\u8F7B\u677E\u6613\u884C\u3002\u4E0B\u9762\u662F\u4E00\u4E2A\u4F8B\u5B50\uFF1A</p><p>\u9879\u76EE\u7ED3\u6784\u5982\u56FE\u6240\u793A\uFF1A</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">|---build/</span></span>
<span class="line"><span style="color:#A6ACCD;">|---node_modules/</span></span>
<span class="line"><span style="color:#A6ACCD;">|---src/</span></span>
<span class="line"><span style="color:#A6ACCD;">|    |---foo.js</span></span>
<span class="line"><span style="color:#A6ACCD;">|    |---bar.js</span></span>
<span class="line"><span style="color:#A6ACCD;">|    |---main.js</span></span>
<span class="line"><span style="color:#A6ACCD;">|---test/</span></span>
<span class="line"><span style="color:#A6ACCD;">|    |---test.js</span></span>
<span class="line"><span style="color:#A6ACCD;">|---gulpfile.js</span></span>
<span class="line"><span style="color:#A6ACCD;">|---index.html</span></span>
<span class="line"><span style="color:#A6ACCD;">|---package.json</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u5176\u4E2Dsrc\u76EE\u5F55\u4E0B\u7684\u4EE3\u7801\u5982\u4E0B\uFF0C\u901A\u8FC7browserify\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5728\u6D4F\u89C8\u5668\u73AF\u5883\u4E2D\u4F7F\u7528CommonJS\u89C4\u8303\u8FDB\u884C\u6A21\u5757\u5F00\u53D1\uFF1A</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">/* foo.js */</span></span>
<span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">i</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">i</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">/* bar.js */</span></span>
<span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">i</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">i</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">*</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">100</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">/* main.js */</span></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> foo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./foo.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> bar </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./bar.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> a </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">foo</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;">) </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">bar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">4</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(a)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u7136\u540E\u662Fgulpfile.js\uFF1A</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki"><code><span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> gulp </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">gulp</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> del </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">del</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> sourcemaps </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">gulp-sourcemaps</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> uglisfy </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">gulp-uglify</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> jshint </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">gulp-jshint</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> browserify </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">gulp-browserify</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> mocha </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">gulp-mocha</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">gulp</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">task</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">clean</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">del</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">build/*</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">gulp</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">task</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">scripts</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">clean</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">gulp</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">src</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">test/test.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">pipe</span><span style="color:#F07178;">(</span><span style="color:#82AAFF;">mocha</span><span style="color:#F07178;">())</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">gulp</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">src</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">src/main.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">pipe</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">sourcemaps</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">init</span><span style="color:#F07178;">())</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">pipe</span><span style="color:#F07178;">(</span><span style="color:#82AAFF;">jshint</span><span style="color:#F07178;">())</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">pipe</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">jshint</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">reporter</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">default</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">))</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">pipe</span><span style="color:#F07178;">(</span><span style="color:#82AAFF;">browserify</span><span style="color:#F07178;">())</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">pipe</span><span style="color:#F07178;">(</span><span style="color:#82AAFF;">uglify</span><span style="color:#F07178;">())</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">pipe</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">sourcemaps</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">write</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">))</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">pipe</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">gulp</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">dest</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">build</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">gulp</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">task</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">watch</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">gulp</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">watch</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">src/*.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">scripts</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">])</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">gulp</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">task</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">default</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">watch</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">scripts</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">])</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>gulp\u7684\u6784\u5EFA\u8FC7\u7A0B\u4EE5task\u4E3A\u57FA\u672C\u5355\u4F4D\uFF0C\u9ED8\u8BA4task\u4E3Adefault\uFF0C\u901A\u8FC7\u8FD9\u79CD\u65B9\u5F0F\uFF0C\u53EF\u4EE5\u5F88\u65B9\u4FBF\u5730\u5B9A\u4E49\u6784\u5EFA\u4EFB\u52A1\u3002\u5728\u4E0A\u9762\u7684\u4EE3\u7801\u4E2D\uFF0C\u4E3B\u8981\u6709\u5982\u4E0B\u4EFB\u52A1\uFF1A</p><ul><li>clean \u6E05\u9664\u4E4B\u524D\u7684build\u4EE3\u7801</li><li>scripts \u811A\u672C\u6784\u5EFA\u4EFB\u52A1\uFF0C\u5305\u62EC\u6D4B\u8BD5\u3001\u68C0\u67E5\u3001\u5408\u5E76\u4EE5\u53CA\u538B\u7F29\u7B49</li><li>watch \u5B9E\u65F6\u76D1\u63A7\u811A\u672C\u7684\u53D8\u5316\u5E76\u81EA\u52A8build</li><li>default \u9ED8\u8BA4\u7684\u6267\u884C\u4EFB\u52A1</li></ul><p>\u7136\u540E\u6267\u884Cgulp\u547D\u4EE4\u5373\u53EF\u8FDB\u884C\u81EA\u52A8\u6784\u5EFA\u3002</p><p>\u5173\u4E8Egulp\u7684\u8BE6\u7EC6\u6587\u6863\uFF0C\u53EF\u4EE5\u53C2\u770B<a href="https://github.com/gulpjs/gulp/blob/master/docs/README.md" target="_blank" rel="noreferrer">https://github.com/gulpjs/gulp/blob/master/docs/README.md</a>\u3002</p>`,14),e=[o];function r(t,c,D,F,y,A){return n(),a("div",null,e)}const u=s(p,[["render",r]]);export{i as __pageData,u as default};
