import{_ as s,o as a,c as n,V as l}from"./chunks/framework.16eef3c0.js";const F=JSON.parse('{"title":"Service","description":"","frontmatter":{},"headers":[],"relativePath":"notes/kubernetes/resources/service.md"}'),p={name:"notes/kubernetes/resources/service.md"},o=l(`<h1 id="service" tabindex="-1">Service <a class="header-anchor" href="#service" aria-label="Permalink to &quot;Service&quot;">​</a></h1><h2 id="类型" tabindex="-1">类型 <a class="header-anchor" href="#类型" aria-label="Permalink to &quot;类型&quot;">​</a></h2><ul><li>ClusterIP：默认类型，会分配一个集群内可访问的虚拟 IP</li><li>NodePort：会暴露一个端口出去，通过 <code>&lt;NodeIP&gt;:&lt;NodePort&gt;</code> 可以访问</li><li>LoadBalancer：使用云服务商提供的负载均衡器对外提供服务</li><li>ExternalName：转发到其它服务上</li></ul><h2 id="创建-service" tabindex="-1">创建 Service <a class="header-anchor" href="#创建-service" aria-label="Permalink to &quot;创建 Service&quot;">​</a></h2><h3 id="clusterip" tabindex="-1">ClusterIP <a class="header-anchor" href="#clusterip" aria-label="Permalink to &quot;ClusterIP&quot;">​</a></h3><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F07178;">apiVersion</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">v1</span></span>
<span class="line"><span style="color:#F07178;">kind</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Service</span></span>
<span class="line"><span style="color:#F07178;">metadata</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">nginx</span></span>
<span class="line"><span style="color:#F07178;">spec</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">type</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ClusterIP</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">selector</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">app</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">nginx</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">ports</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">port</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">80</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">protocol</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">TCP</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">targetPort</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">80</span></span></code></pre></div><p>其中 <code>port</code> 是 Service 对外暴露的端口，<code>targetPort</code> 是目标 Pod 的端口。在不声明的情况下，<code>targetPort</code> 默认和 <code>port</code> 保持一致。</p><h3 id="nodeport" tabindex="-1">NodePort <a class="header-anchor" href="#nodeport" aria-label="Permalink to &quot;NodePort&quot;">​</a></h3><p><code>NodePort</code> 类型的 Service 可以使用 <code>&lt;NodeIP&gt;:&lt;NodePort&gt;</code> 来访问，例如：</p><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F07178;">apiVersion</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">v1</span></span>
<span class="line"><span style="color:#F07178;">kind</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Service</span></span>
<span class="line"><span style="color:#F07178;">metadata</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">nginx</span></span>
<span class="line"><span style="color:#F07178;">spec</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">type</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">NodePort</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">selector</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">app</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">nginx</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">ports</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">port</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">80</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">protocol</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">TCP</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">targetPort</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">80</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">nodePort</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">32080</span></span></code></pre></div><p>如果不指定 <code>nodePort</code>，系统会默认分配一个端口。默认的端口范围是 <code>30000-32767</code>。</p><p>更多详情参考 <a href="https://kubernetes.io/docs/concepts/services-networking/service/#nodeport" target="_blank" rel="noreferrer">Type NodePort</a>。</p><h3 id="loadbalancer" tabindex="-1">LoadBalancer <a class="header-anchor" href="#loadbalancer" aria-label="Permalink to &quot;LoadBalancer&quot;">​</a></h3><p>通过云服务商提供的负载均衡器对外暴露服务。</p><p>更多详情参考 <a href="https://kubernetes.io/docs/concepts/services-networking/service/#loadbalancer" target="_blank" rel="noreferrer">Type LoadBalancer</a>。</p><h3 id="externalname" tabindex="-1">ExternalName <a class="header-anchor" href="#externalname" aria-label="Permalink to &quot;ExternalName&quot;">​</a></h3><p><code>ExternalName</code> 类型的 Service 可以在 DNS 解析阶段，将服务地址解析成另一个外部服务的地址，从而进行访问。例如：</p><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F07178;">apiVersion</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">v1</span></span>
<span class="line"><span style="color:#F07178;">kind</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Service</span></span>
<span class="line"><span style="color:#F07178;">metadata</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">httpbin</span></span>
<span class="line"><span style="color:#F07178;">spec</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">type</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ExternalName</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">externalName</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">httpbin.org</span></span></code></pre></div><p>更多详情参考 <a href="https://kubernetes.io/docs/concepts/services-networking/service/#externalname" target="_blank" rel="noreferrer">Type ExternalName</a>。</p><h2 id="多端口" tabindex="-1">多端口 <a class="header-anchor" href="#多端口" aria-label="Permalink to &quot;多端口&quot;">​</a></h2><p>一个 Service 可以对外暴露多个端口，此时应当为每个端口指定一个 <code>name</code>：</p><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F07178;">apiVersion</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">v1</span></span>
<span class="line"><span style="color:#F07178;">kind</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Service</span></span>
<span class="line"><span style="color:#F07178;">metadata</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">my-service</span></span>
<span class="line"><span style="color:#F07178;">spec</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">selector</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">app</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">my-app</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">ports</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">http</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">protocol</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">TCP</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">port</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">80</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">targetPort</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">9376</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">protocol</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">TCP</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">port</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">443</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">targetPort</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">9377</span></span></code></pre></div><h2 id="服务发现" tabindex="-1">服务发现 <a class="header-anchor" href="#服务发现" aria-label="Permalink to &quot;服务发现&quot;">​</a></h2><h3 id="环境变量" tabindex="-1">环境变量 <a class="header-anchor" href="#环境变量" aria-label="Permalink to &quot;环境变量&quot;">​</a></h3><p>详情参考 <a href="https://kubernetes.io/docs/concepts/services-networking/service/#environment-variables" target="_blank" rel="noreferrer">Environment variables</a>。</p><p>由于对服务启动顺序有依赖，因此实际很少使用。</p><h3 id="dns" tabindex="-1">DNS <a class="header-anchor" href="#dns" aria-label="Permalink to &quot;DNS&quot;">​</a></h3><p>服务之间可以通过 <code>service-name.namespacee</code> 的方式来互相访问，如果两个服务在同一个 namespace 下，可以直接通过 <code>service-name</code> 来互相访问。</p><p>例如：</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">kubectl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">get</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">svc</span></span>
<span class="line"><span style="color:#FFCB6B;">NAME</span><span style="color:#A6ACCD;">         </span><span style="color:#C3E88D;">TYPE</span><span style="color:#A6ACCD;">        </span><span style="color:#C3E88D;">CLUSTER-IP</span><span style="color:#A6ACCD;">      </span><span style="color:#C3E88D;">EXTERNAL-IP</span><span style="color:#A6ACCD;">   </span><span style="color:#C3E88D;">PORT</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">S</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">   </span><span style="color:#C3E88D;">AGE</span></span>
<span class="line"><span style="color:#FFCB6B;">nginx</span><span style="color:#A6ACCD;">        </span><span style="color:#C3E88D;">ClusterIP</span><span style="color:#A6ACCD;">   </span><span style="color:#C3E88D;">10.107.254.54</span><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">&lt;</span><span style="color:#C3E88D;">non</span><span style="color:#A6ACCD;">e</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">        </span><span style="color:#F78C6C;">80</span><span style="color:#C3E88D;">/TCP</span><span style="color:#A6ACCD;">    </span><span style="color:#C3E88D;">1d</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">kubectl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">run</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-it</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--rm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">busybox</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--image=busybox:1.28.4</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">sh</span></span>
<span class="line"><span style="color:#FFCB6B;">If</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">you</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">don</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">t see a command prompt, try pressing enter.</span></span>
<span class="line"><span style="color:#C3E88D;">/ # wget http://nginx</span></span>
<span class="line"><span style="color:#C3E88D;">Connecting to nginx (10.107.254.54:80)</span></span>
<span class="line"><span style="color:#C3E88D;">index.html           100% |******************************|   612   0:00:00 ETA</span></span>
<span class="line"><span style="color:#C3E88D;">/ #</span></span>
<span class="line"><span style="color:#C3E88D;">/ # nslookup nginx.default</span></span>
<span class="line"><span style="color:#C3E88D;">Server:    10.96.0.10</span></span>
<span class="line"><span style="color:#C3E88D;">Address 1: 10.96.0.10 kube-dns.kube-system.svc.cluster.local</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C3E88D;">Name:      nginx.default</span></span>
<span class="line"><span style="color:#C3E88D;">Address 1: 10.107.254.54 nginx.default.svc.cluster.local</span></span></code></pre></div><p>可以看到 DNS 解析 <code>nginx.default</code> 的地址就是 nginx Service 的 ClusterIP。</p><p>更多详情参考 <a href="https://kubernetes.io/docs/concepts/services-networking/dns-pod-service/" target="_blank" rel="noreferrer">DNS for Services and Pods</a>。</p><h2 id="headless-service" tabindex="-1">Headless Service <a class="header-anchor" href="#headless-service" aria-label="Permalink to &quot;Headless Service&quot;">​</a></h2><p>如果显式指定 <code>clusterIP</code> 为 <code>None</code>，那么创建出来的就是 Headless Service，通过这种方式用户可以定制负载均衡的方式。</p><p>Headless Service 不会被自动分配 ClusterIP，而且 DNS 解析也会直接解析为 Pod 的地址。</p><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F07178;">apiVersion</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">v1</span></span>
<span class="line"><span style="color:#F07178;">kind</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Service</span></span>
<span class="line"><span style="color:#F07178;">metadata</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">nginx</span></span>
<span class="line"><span style="color:#F07178;">spec</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">selector</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">app</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">nginx</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">clusterIP</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">None</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">ports</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">port</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">80</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">protocol</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">TCP</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">targetPort</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">80</span></span></code></pre></div><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">kubectl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">get</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">svc</span></span>
<span class="line"><span style="color:#FFCB6B;">NAME</span><span style="color:#A6ACCD;">         </span><span style="color:#C3E88D;">TYPE</span><span style="color:#A6ACCD;">        </span><span style="color:#C3E88D;">CLUSTER-IP</span><span style="color:#A6ACCD;">   </span><span style="color:#C3E88D;">EXTERNAL-IP</span><span style="color:#A6ACCD;">   </span><span style="color:#C3E88D;">PORT</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">S</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">   </span><span style="color:#C3E88D;">AGE</span></span>
<span class="line"><span style="color:#FFCB6B;">nginx</span><span style="color:#A6ACCD;">        </span><span style="color:#C3E88D;">ClusterIP</span><span style="color:#A6ACCD;">   </span><span style="color:#C3E88D;">None</span><span style="color:#A6ACCD;">         </span><span style="color:#89DDFF;">&lt;</span><span style="color:#C3E88D;">non</span><span style="color:#A6ACCD;">e</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">        </span><span style="color:#F78C6C;">80</span><span style="color:#C3E88D;">/TCP</span><span style="color:#A6ACCD;">    </span><span style="color:#C3E88D;">16s</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">kubectl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">get</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">po</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-owide</span></span>
<span class="line"><span style="color:#FFCB6B;">NAME</span><span style="color:#A6ACCD;">                     </span><span style="color:#C3E88D;">READY</span><span style="color:#A6ACCD;">     </span><span style="color:#C3E88D;">STATUS</span><span style="color:#A6ACCD;">    </span><span style="color:#C3E88D;">RESTARTS</span><span style="color:#A6ACCD;">   </span><span style="color:#C3E88D;">AGE</span><span style="color:#A6ACCD;">       </span><span style="color:#C3E88D;">IP</span><span style="color:#A6ACCD;">          </span><span style="color:#C3E88D;">NODE</span></span>
<span class="line"><span style="color:#FFCB6B;">nginx-65fc954674-lcvcj</span><span style="color:#A6ACCD;">   </span><span style="color:#F78C6C;">1</span><span style="color:#C3E88D;">/</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">       </span><span style="color:#C3E88D;">Running</span><span style="color:#A6ACCD;">   </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">          </span><span style="color:#C3E88D;">22s</span><span style="color:#A6ACCD;">       </span><span style="color:#C3E88D;">10.1.0.62</span><span style="color:#A6ACCD;">   </span><span style="color:#C3E88D;">docker-for-desktop</span></span>
<span class="line"><span style="color:#FFCB6B;">nginx-65fc954674-nsnz2</span><span style="color:#A6ACCD;">   </span><span style="color:#F78C6C;">1</span><span style="color:#C3E88D;">/</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">       </span><span style="color:#C3E88D;">Running</span><span style="color:#A6ACCD;">   </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">          </span><span style="color:#C3E88D;">22s</span><span style="color:#A6ACCD;">       </span><span style="color:#C3E88D;">10.1.0.60</span><span style="color:#A6ACCD;">   </span><span style="color:#C3E88D;">docker-for-desktop</span></span>
<span class="line"><span style="color:#FFCB6B;">nginx-65fc954674-s7rmj</span><span style="color:#A6ACCD;">   </span><span style="color:#F78C6C;">1</span><span style="color:#C3E88D;">/</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">       </span><span style="color:#C3E88D;">Running</span><span style="color:#A6ACCD;">   </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">          </span><span style="color:#C3E88D;">22s</span><span style="color:#A6ACCD;">       </span><span style="color:#C3E88D;">10.1.0.61</span><span style="color:#A6ACCD;">   </span><span style="color:#C3E88D;">docker-for-desktop</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">kubectl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">run</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-it</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--rm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">busybox</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--image=busybox:1.28.4</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">sh</span></span>
<span class="line"><span style="color:#FFCB6B;">If</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">you</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">don</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">t see a command prompt, try pressing enter.</span></span>
<span class="line"><span style="color:#C3E88D;">/ # nslookup nginx.default</span></span>
<span class="line"><span style="color:#C3E88D;">Server:    10.96.0.10</span></span>
<span class="line"><span style="color:#C3E88D;">Address 1: 10.96.0.10 kube-dns.kube-system.svc.cluster.local</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C3E88D;">Name:      nginx.default</span></span>
<span class="line"><span style="color:#C3E88D;">Address 1: 10.1.0.62</span></span>
<span class="line"><span style="color:#C3E88D;">Address 2: 10.1.0.60</span></span>
<span class="line"><span style="color:#C3E88D;">Address 3: 10.1.0.61</span></span></code></pre></div><h2 id="对外提供服务" tabindex="-1">对外提供服务 <a class="header-anchor" href="#对外提供服务" aria-label="Permalink to &quot;对外提供服务&quot;">​</a></h2><ul><li>NodePort</li><li>LoadBalancer</li><li><a href="./ingress.html">Ingress</a></li></ul><h2 id="参考" tabindex="-1">参考 <a class="header-anchor" href="#参考" aria-label="Permalink to &quot;参考&quot;">​</a></h2><ul><li><a href="https://kubernetes.io/docs/concepts/services-networking/service/" target="_blank" rel="noreferrer">Service</a></li></ul>`,41),e=[o];function t(c,r,C,y,D,A){return a(),n("div",null,e)}const d=s(p,[["render",t]]);export{F as __pageData,d as default};
