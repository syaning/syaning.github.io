import{_ as s,o as n,c as a,a as l}from"./app.8d66c544.js";const C=JSON.parse('{"title":"d3\u529B\u573A\u56FE\u4E2D\u4E8B\u4EF6\u51B2\u7A81\u89E3\u51B3\u65B9\u6CD5","description":"","frontmatter":{"layout":"post","title":"d3\u529B\u573A\u56FE\u4E2D\u4E8B\u4EF6\u51B2\u7A81\u89E3\u51B3\u65B9\u6CD5","date":"2016-02-01 11:30:00 +0800"},"headers":[{"level":2,"title":"1. zoom\u548Cdrag","slug":"_1-zoom\u548Cdrag","link":"#_1-zoom\u548Cdrag","children":[]},{"level":2,"title":"2. zoom\u548Cdblclick","slug":"_2-zoom\u548Cdblclick","link":"#_2-zoom\u548Cdblclick","children":[]},{"level":2,"title":"3. drag\u548Cclick","slug":"_3-drag\u548Cclick","link":"#_3-drag\u548Cclick","children":[]},{"level":2,"title":"4. click\u4E0Edblclick","slug":"_4-click\u4E0Edblclick","link":"#_4-click\u4E0Edblclick","children":[]}],"relativePath":"my/post/2016-02-01-d3-force-event-conflict.md"}'),p={name:"my/post/2016-02-01-d3-force-event-conflict.md"},o=l(`<p>\u901A\u8FC7\u4F7F\u7528<a href="http://d3js.org/" target="_blank" rel="noreferrer">d3.js</a>\uFF0C\u53EF\u4EE5\u975E\u5E38\u65B9\u4FBF\u5730\u521B\u5EFA<a href="https://github.com/mbostock/d3/wiki/Force-Layout" target="_blank" rel="noreferrer">\u529B\u573A\u56FE(force layout graph)</a>\u3002\u5728\u529B\u573A\u56FE\u7684\u4EA4\u4E92\u4E2D\uFF0C\u5E38\u4F1A\u6D89\u53CA\u5230\u591A\u79CD\u4E8B\u4EF6\uFF0C\u4F8B\u5982\uFF1A\u7F29\u653E\uFF0C\u62D6\u52A8\uFF0C\u70B9\u51FB\uFF08\u5355\u51FB\u3001\u53CC\u51FB\u3001\u53F3\u952E\uFF09\u7B49\u3002\u5728\u6709\u4E9B\u60C5\u51B5\u4E0B\uFF0C\u4E8B\u4EF6\u4E4B\u95F4\u4F1A\u4EA7\u751F\u51B2\u7A81\u3002</p><blockquote><p>\u6CE8\uFF1A\u6587\u4E2D\u6240\u63D0\u7684<code>node</code>\u6307\u7684\u662F\u529B\u573A\u56FE\u4E2D\u7684\u8282\u70B9\u3002</p></blockquote><h2 id="_1-zoom\u548Cdrag" tabindex="-1">1. zoom\u548Cdrag <a class="header-anchor" href="#_1-zoom\u548Cdrag" aria-hidden="true">#</a></h2><p>\u4E3A\u56FE\u8868\u6DFB\u52A0\u7F29\u653E\u529F\u80FD\u7684\u4EE3\u7801\u5982\u4E0B\uFF1A</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki"><code><span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> zoom </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> d3</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">behavior</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">zoom</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">scaleExtent</span><span style="color:#A6ACCD;">([</span><span style="color:#F78C6C;">0.5</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">])</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">on</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">zoom</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">		</span><span style="color:#676E95;">// ...</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">svg</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">call</span><span style="color:#A6ACCD;">(zoom)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u5141\u8BB8\u529B\u573A\u56FE\u7684node\u53EF\u62D6\u52A8\u7684\u4EE3\u7801\u5982\u4E0B\uFF1A</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">nodes</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">call</span><span style="color:#A6ACCD;">(force</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">drag)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u5728zoom\u548Cdrag\u5171\u5B58\u7684\u60C5\u51B5\u4E0B\uFF0C\u62D6\u52A8node\u65F6\u5019\uFF0C\u4F1A\u89E6\u53D1zoom\u7684\u62D6\u52A8\u4E8B\u4EF6\uFF0C\u4ECE\u800C\u5BFC\u81F4node\u65E0\u6CD5\u88AB\u62D6\u52A8\u3002\u6B64\u65F6\u7684\u89E3\u51B3\u65B9\u6CD5\u662F\uFF1A</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">force</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">drag</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">on</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">dragstart</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">d</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#A6ACCD;">d3</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">event</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">sourceEvent</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">stopPropagation</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">		</span><span style="color:#676E95;">// ...</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h2 id="_2-zoom\u548Cdblclick" tabindex="-1">2. zoom\u548Cdblclick <a class="header-anchor" href="#_2-zoom\u548Cdblclick" aria-hidden="true">#</a></h2><p>\u5728\u6DFB\u52A0\u4E86zoom\u7684\u60C5\u51B5\u4E0B\uFF0C\u9ED8\u8BA4\u53CC\u51FB\u56FE\u50CF\u4F1A\u65B9\u6CD5\u3002\u6B64\u65F6\u5982\u679C\u60F3\u8981\u4E3Anode\u6DFB\u52A0\u53CC\u51FB\u4E8B\u4EF6\uFF0C\u9700\u8981\u7981\u6B62zoom\u7684\u53CC\u51FB\u3002\u4EE3\u7801\u5982\u4E0B\uFF1A</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">svg</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">on</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">dblclick.zoom</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h2 id="_3-drag\u548Cclick" tabindex="-1">3. drag\u548Cclick <a class="header-anchor" href="#_3-drag\u548Cclick" aria-hidden="true">#</a></h2><p>\u5982\u679C\u5BF9node\u540C\u65F6\u76D1\u542C\u4E86drag\u4E8B\u4EF6\u548Cclick\u4E8B\u4EF6\u3002\u90A3\u4E48\u5F53\u62D6\u52A8\u7684\u65F6\u5019\uFF0C\u4F1A\u540C\u65F6\u89E6\u53D1click\u4E8B\u4EF6\u3002\u6B64\u65F6\u7684\u89E3\u51B3\u65B9\u6CD5\u662F\uFF1A</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">nodes</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">on</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">click</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">d</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">d3</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">event</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">defaultPrevented</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#89DDFF;">return</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">	</span><span style="color:#676E95;">// ...</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h2 id="_4-click\u4E0Edblclick" tabindex="-1">4. click\u4E0Edblclick <a class="header-anchor" href="#_4-click\u4E0Edblclick" aria-hidden="true">#</a></h2><p>\u5982\u679C\u5BF9node\u540C\u65F6\u6DFB\u52A0\u4E86click\u4E0Edblclick\u4E8B\u4EF6\uFF0C\u90A3\u4E48\u5728\u53CC\u51FB\u7684\u65F6\u5019\u4F1A\u89E6\u53D1\u4E24\u6B21click\u4E8B\u4EF6\u3002</p><p>\u53EF\u4EE5\u5728click\u4E8B\u4EF6\u7684\u5904\u7406\u51FD\u6570\u4E2D\uFF0C\u5224\u65AD\u4E24\u6B21\u70B9\u51FB\u7684\u65F6\u95F4\u5DEE\u3002\u5982\u679C\u5C0F\u4E8E\u67D0\u4E2A\u503C\uFF0C\u5219\u8BA4\u4E3A\u662F\u53CC\u51FB\u4E8B\u4EF6\uFF0C\u4E0D\u505A\u5904\u7406\uFF1B\u5426\u5219\u662F\u5355\u51FB\u4E8B\u4EF6\uFF0C\u6B63\u5E38\u5904\u7406\u3002\u4EE3\u7801\u5982\u4E0B\uFF1A</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">nodes</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">on</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">dblclick</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">d</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">		</span><span style="color:#676E95;">// process double click</span></span>
<span class="line"><span style="color:#89DDFF;">		</span><span style="color:#676E95;">// ...</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">on</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">click</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">d</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">d</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">_clickid</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">			</span><span style="color:#82AAFF;">clearTimeout</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">d</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">_clickid</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">			</span><span style="color:#A6ACCD;">d</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">_clickid</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">null;</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">			</span><span style="color:#A6ACCD;">d</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">_clickid</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">setTimeout</span><span style="color:#F07178;">(</span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">				</span><span style="color:#676E95;">// process simple click</span></span>
<span class="line"><span style="color:#89DDFF;">				</span><span style="color:#676E95;">// ...</span></span>
<span class="line"><span style="color:#F07178;">				</span><span style="color:#A6ACCD;">d</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">_clickid</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">null;</span></span>
<span class="line"><span style="color:#F07178;">			</span><span style="color:#89DDFF;">}.</span><span style="color:#82AAFF;">bind</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">this</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">350</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u4E5F\u53EF\u4EE5\u53EA\u76D1\u542Cclick\u4E8B\u4EF6\uFF0C\u5728click\u4E8B\u4EF6\u7684\u5904\u7406\u51FD\u6570\u4E2D\uFF0C\u5982\u679C\u5224\u65AD\u662F\u53CC\u51FB\uFF0C\u5219\u6267\u884C\u53CC\u51FB\u7684\u5904\u7406\uFF1B\u5426\u5219\u6267\u884C\u5355\u51FB\u7684\u5904\u7406\u3002\u4F8B\u5982\uFF1A</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">nodes</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">on</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">click</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">d</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">d</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">_clickid</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#82AAFF;">clearTimeout</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">d</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">_clickid</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#A6ACCD;">d</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">_clickid</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">null;</span></span>
<span class="line"><span style="color:#89DDFF;">		</span><span style="color:#676E95;">// process double click</span></span>
<span class="line"><span style="color:#89DDFF;">		</span><span style="color:#676E95;">// ...</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#A6ACCD;">d</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">_clickid</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">setTimeout</span><span style="color:#F07178;">(</span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">			</span><span style="color:#676E95;">// process simple click</span></span>
<span class="line"><span style="color:#89DDFF;">			</span><span style="color:#676E95;">// ...</span></span>
<span class="line"><span style="color:#F07178;">			</span><span style="color:#A6ACCD;">d</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">_clickid</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">null;</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#89DDFF;">}.</span><span style="color:#82AAFF;">bind</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">this</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">350</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u8FD9\u79CD\u60C5\u5F62\u4FBF\u662F\u5178\u578B\u7684<a href="https://www.nczonline.net/blog/2007/11/30/the-throttle-function/" target="_blank" rel="noreferrer">throttle function</a>\u3002</p>`,22),c=[o];function e(t,r,F,D,y,i){return n(),a("div",null,c)}const d=s(p,[["render",e]]);export{C as __pageData,d as default};
