import{_ as s,o as a,c as n,V as l}from"./chunks/framework.16eef3c0.js";const h=JSON.parse('{"title":"树莓派初体验(1)——部署","description":"","frontmatter":{"layout":"post","title":"树莓派初体验(1)——部署","date":"2021-05-17 22:30:00 +0800"},"headers":[],"relativePath":"my/post/2021-05-17-raspberrypi-1.md"}'),o={name:"my/post/2021-05-17-raspberrypi-1.md"},e=l(`<h2 id="_1-组装" tabindex="-1">1. 组装 <a class="header-anchor" href="#_1-组装" aria-label="Permalink to &quot;1. 组装&quot;">​</a></h2><p>买的是 4B 的板子，8G 内存，32G TF 存储卡。组装比较简单，不做赘述。</p><h2 id="_2-安装系统" tabindex="-1">2. 安装系统 <a class="header-anchor" href="#_2-安装系统" aria-label="Permalink to &quot;2. 安装系统&quot;">​</a></h2><p>参考 <a href="https://ubuntu.com/tutorials/how-to-install-ubuntu-on-your-raspberry-pi" target="_blank" rel="noreferrer">How to install Ubuntu Server on your Raspberry Pi</a> 安装 Ubuntu 20.04.</p><h2 id="_3-配置静态ip" tabindex="-1">3. 配置静态IP <a class="header-anchor" href="#_3-配置静态ip" aria-label="Permalink to &quot;3. 配置静态IP&quot;">​</a></h2><p>如果没有该需求，可以直接跳过。</p><p>如果需要配置静态IP，可以参考 <a href="https://ubuntu.com/server/docs/network-configuration" target="_blank" rel="noreferrer">Network Configuration</a>.</p><p>修改 <code>/etc/netplan/99_config.yaml</code> 文件：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">network:</span></span>
<span class="line"><span style="color:#A6ACCD;">  version: 2</span></span>
<span class="line"><span style="color:#A6ACCD;">  renderer: networkd</span></span>
<span class="line"><span style="color:#A6ACCD;">  ethernets:</span></span>
<span class="line"><span style="color:#A6ACCD;">    eth0:</span></span>
<span class="line"><span style="color:#A6ACCD;">      addresses:</span></span>
<span class="line"><span style="color:#A6ACCD;">        - 192.168.0.151/24</span></span>
<span class="line"><span style="color:#A6ACCD;">      gateway4: 192.168.0.1</span></span>
<span class="line"><span style="color:#A6ACCD;">      nameservers:</span></span>
<span class="line"><span style="color:#A6ACCD;">        addresses: [114.114.114.114]</span></span></code></pre></div><p>然后执行 <code>sudo netplan apply</code> 即可。</p><h2 id="_4-配置时区" tabindex="-1">4. 配置时区 <a class="header-anchor" href="#_4-配置时区" aria-label="Permalink to &quot;4. 配置时区&quot;">​</a></h2><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">timedatectl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">set-timezone</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Asia/Shanghai</span></span></code></pre></div><h2 id="_5-更新" tabindex="-1">5. 更新 <a class="header-anchor" href="#_5-更新" aria-label="Permalink to &quot;5. 更新&quot;">​</a></h2><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">apt</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">update</span></span>
<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">apt</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">upgrade</span></span>
<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">apt</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">autoremove</span></span></code></pre></div><h2 id="_6-科学上网" tabindex="-1">6. 科学上网 <a class="header-anchor" href="#_6-科学上网" aria-label="Permalink to &quot;6. 科学上网&quot;">​</a></h2><p>参考：</p><ul><li><a href="https://ochicken.top/2019/10/11/20191011-Shadowsocks-libev/" target="_blank" rel="noreferrer">Shadowsocks-libev的Server和Client(for Linux)配置</a></li><li><a href="https://blog.gadflysu.com/linux/ubuntu-primer/" target="_blank" rel="noreferrer">现在开始使用 Ubuntu 20.04</a></li></ul><h3 id="安装-shadowsocks-libev" tabindex="-1">安装 shadowsocks-libev <a class="header-anchor" href="#安装-shadowsocks-libev" aria-label="Permalink to &quot;安装 shadowsocks-libev&quot;">​</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 1. 安装 shadowsocks-libev</span></span>
<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">apt</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">shadowsocks-libev</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 2. 由于这里只需要启动 client，因此禁用 server</span></span>
<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">systemctl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">disable</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">shadowsocks-libev</span></span>
<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">systemctl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">stop</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">shadowsocks-libev</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 3. 配置 /etc/shadowsocks-libev/client.json</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 4. 设置开启启动并启动 client</span></span>
<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">systemctl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">enable</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">shadowsocks-libev-local@client</span></span>
<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">systemctl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">start</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">shadowsocks-libev-local@client</span></span></code></pre></div><h3 id="安装-privoxy" tabindex="-1">安装 privoxy <a class="header-anchor" href="#安装-privoxy" aria-label="Permalink to &quot;安装 privoxy&quot;">​</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 1. 安装 privoxy</span></span>
<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">apt</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">privoxy</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 2. 配置 /etc/privoxy/config</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 添加 forward-socks5  /   127.0.0.1:1080 .</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 3. 重启</span></span>
<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">systemctl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">restart</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">privoxy</span></span></code></pre></div><p>以上配置是设置了全局代理，如果希望以 PAC 模式进行代理，可以参考 <a href="https://github.com/zfl9/gfwlist2privoxy" target="_blank" rel="noreferrer">gfwlist2privoxy</a>，此时上面第 2 步中不用添加 <code>forward-socks5 / 127.0.0.1:1080 .</code>。</p><blockquote><p>最好是不要用全局代理，而是设置为 PAC 模式，这样对于一些正常网站访问会比较快。</p></blockquote><p>然后在 <code>~/.bashrc</code> 添加：</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">enable_ss()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">export</span><span style="color:#A6ACCD;"> HTTP_PROXY</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://127.0.0.1:8118</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">export</span><span style="color:#A6ACCD;"> HTTPS_PROXY</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://127.0.0.1:8118</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">disable_ss()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#82AAFF;">unset</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">HTTP_PROXY</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#82AAFF;">unset</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">HTTPS_PROXY</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>这样就可以通过 <code>enable_ss</code> 来开启代理，通过 <code>disable_ss</code> 来关闭代理。</p>`,26),p=[e];function t(c,r,i,y,C,A){return a(),n("div",null,p)}const D=s(o,[["render",t]]);export{h as __pageData,D as default};
